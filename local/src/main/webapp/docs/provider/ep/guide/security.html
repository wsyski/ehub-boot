<html>
<head>
    <link rel="stylesheet" type="text/css" href="../../../../css/ehub.css"/>
    <title>eHUB Provider API Security</title>
</head>
<body>
<h1>eHUB Provider API Security</h1>

<ol class="breadcrumb">
    <li><a title="eHUB Documentation" href="../../../../">Home</a></li>
    <li><a title="Adding a new media provider" href="../../">Adding a new media provider</a></li>
    <li><a title="eHUB Provider API Guide" href="./">eHUB Provider API Guide</a></li>
    <li class="active">eHUB Provider API Security</li>
</ol>
<p>The eHUB API uses the standard JSON Web Token (JWT) Authorization header to pass the authentication information. JSON
    Web Tokens are an open, industry standard RFC 7519 method for representing claims securely between two parties.
    Please see the <a href="https://jwt.io" target="_blank">JWT documentation</a>.</p>
<p>The following JWT claims are in use by eHUB:</p>
<ul>
    <li>name (public, optional) - patron name</li>
    <li>birth date (private, optional) - patron birth name (ISO date format)</li>
    <li>email (public, optional) - patron email</li>
    <li>iat (public, mandatory) - issued at (time in seconds since epoch see <a href="https://www.epochconverter.com" target="_blank">Epoch & Unix Timestamp Conversion Tools</a>)</li>
    <li>exp (public, optional) - expires at (time in seconds since epoch see <a href="https://www.epochconverter.com" target="_blank">Epoch & Unix Timestamp Conversion Tools</a>)</li>
    <li>iss (public, mandatory) - site id as provided by the content provider</li>
    <li>patronId (private, optional) - patron id</li>
    <li>libraryCard (private, optional) - patron library card</li>
    <li>ehubConsumerId (private, required) - ehub consumer id.</li>
</ul>
<p>The Authorization header has the following form.</p>
<p><code>Bearer
    eyJhbGciOiJIUzI1NiJ9.eyJlaHViQ29uc3VtZXJJZCI6MywicGF0cm9uSWQiOiJwYXRyb25JZCIsImlzcyI6InNpdGVJZCIsImxpYnJhcnlDYXJkIjoibGlicmFyeUNhcmQiLCJpYXQiOjE0OTQ0OTk1MjQsImVtYWlsIjoid29zQGF4aWVsbC5jb20ifQ.i2HZMtE-UWo19gSCC3r2Tu3FeHfJUZ2kXW1K-J8vPLA</code>
</p>
<p>The above authorization header can be decoded into the following JSON object (please use the <a href="https://jwt.io" target="_blank">JWT Debugger</a>):</p>
<pre>
{
  "ehubConsumerId": 3,
  "patronId": "patronId",
  "iss": "siteId",
  "libraryCard": "libraryCard",
  "iat": 1494499524,
  "email": "wos@axiell.com"
}
</pre>
<p>The secret key used in the above example was: c2VjcmV0S2V5 (base64 encoded)</p>
</body>
</html>